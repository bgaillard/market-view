-- Tables
CREATE TABLE company (
  id                 INTEGER      PRIMARY KEY AUTOINCREMENT,
  creation_date      DATETIME     NOT NULL,
  update_date        DATETIME     NOT NULL,
  name               VARCHAR(255) NOT NULL,
  ticker             VARCHAR(255) NOT NULL
);

CREATE TABLE day_point_close (
  id            INTEGER    PRIMARY KEY AUTOINCREMENT,
  date          DATE       NOT NULL,
  value         REAL       NOT NULL,
  company_id    INTEGER    NOT NULL,
  FOREIGN KEY(company_id) REFERENCES company(id)
);

CREATE TABLE market_index(
  id            INTEGER PRIMARY KEY AUTOINCREMENT,
  creation_date DATETIME NOT NULL,
  update_date   DATETIME NOT NULL,
  name          VARCHAR(255) NOT NULL
);

CREATE TABLE company_market_index(
  company_id  INTEGER NOT NULL,
  market_index_id    INTEGER NOT NULL,
  FOREIGN KEY(company_id) REFERENCES company(id),
  FOREIGN KEY(market_index_id)   REFERENCES market_index(id)
);

-- Indices
--
-- https://finance.yahoo.com/world-indices/
-- https://www.investing.com/indices/france-indices
INSERT INTO market_index(id, creation_date, update_date, name)
VALUES
(1, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC 40"),
(2, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC NEXT 20"),
(3, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC MID 60"),
(4, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC ALL TRADABLE"),
(5, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC MID AND SMALL"),
(6, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAC ALLSHARES"),
(7, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SBF 120");

-- Companies
--
-- https://github.com/mlapenna7/yh_symbol_universe
INSERT INTO company(id, creation_date, update_date, name, ticker)
VALUES
(1,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "AIR LIQUIDE",               "AI.PA"),
(2,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "AIRBUS GROUP",              "AIR.PA"),
(3,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "ALSTOM",                    "ALO.PA"),
(4,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "ARCELORMITTAL",             "MT.AS"),
(5,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "AXA",                       "CS.PA"),
(6,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "BNP PARIBAS",               "BNP.PA"),
(7,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "BOUYGUES",                  "EN.PA"),
(8,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CAPGEMINI",                 "CAP.PA"),
(9,  "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CARREFOUR",                 "CA.PA"),
(10, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "CREDIT AGRICOLE",           "ACA.PA"),
(11, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "DANONE",                    "BN.PA"),
(12, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "DASSAULT SYSTEMES",         "DSY.PA"),
(13, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "ENGIE",                     "ENGI.PA"),
(14, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "ESSILORLUXOTTICA",          "EL.PA"),
(15, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "EUROFINS SCIENTIFIC",       "ERF.PA"),
(16, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "HERMES INTERNATIONAL",      "RMS.PA"),
(17, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "KERING",                    "KER.PA"),
(18, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "LEGRAND",                   "LR.PA"),
(19, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "L'OREAL",                   "OR.PA"),
(20, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "LVMH",                      "MC.PA"),
(21, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "MICHELIN",                  "ML.PA"),
(22, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "ORANGE",                    "ORA.PA"),
(23, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "PERNOD RICARD",             "RI.PA"),
(24, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "PUBLICIS",                  "PUB.PA"),
(25, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "RENAULT",                   "RNO.PA"),
(26, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SAFRAN",                    "SAF.PA"),
(27, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SAINT-GOBAIN",              "SGO.PA"),
(28, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SANOFI",                    "SAN.PA"),
(29, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SCHNEIDER ELECTRIC",        "SU.PA"),
(30, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "SOCIETE GENERALE",          "GLE.PA"),
(31, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "STELLANTIS",                "STLA.PA"),
(32, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "STMICROELECTRONICS",        "STM.PA"),
(33, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "TELEPERFORMANCE",           "TEP.PA"),
(34, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "THALES",                    "HO.PA"),
(35, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "TOTALENERGIES",             "TTE.PA"),
(36, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "UNIBAIL-RODAMCO-WESTFIELD", "URW.AS"),
(37, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "VEOLIA ENVIRONNEMENT",      "VIE.PA"),
(38, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "VINCI",                     "DG.PA"),
(39, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "VIVENDI SE",                "VIV.PA"),
(40, "2022-08-15T09:00:00.000000", "2022-08-15T09:00:00.000000", "WORLDLINE",                 "WLN.PA");

INSERT INTO company_market_index(company_id, market_index_id)
VALUES

-- CAC 40
(1, 1),
(1, 2),
(1, 3),
(1, 4),
(1, 5),
(1, 6),
(1, 7),
(1, 8),
(1, 9),
(1, 10),
(1, 11),
(1, 12),
(1, 13),
(1, 14),
(1, 15),
(1, 16),
(1, 17),
(1, 18),
(1, 19),
(1, 20),
(1, 21),
(1, 22),
(1, 23),
(1, 24),
(1, 25),
(1, 26),
(1, 27),
(1, 28),
(1, 29),
(1, 30),
(1, 31),
(1, 32),
(1, 33),
(1, 34),
(1, 35),
(1, 36),
(1, 37),
(1, 38),
(1, 39),
(1, 40);
